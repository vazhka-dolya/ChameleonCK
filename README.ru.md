**Прочитать эту страницу по-русски** | [Read this page in English](https://github.com/vazhka-dolya/ChameleonCK/blob/main/README.md)
# ChameleonCK
**ChameleonCK** (или же просто **Chameleon**; сокращено **CCK**) — инструмент для хромакея в Super Mario 64, включающий в себя адд-он для [Mario 64 Movie Maker 3](https://github.com/projectcomet64/M64MM), задуманный для использования вместе со специальным ROM'ом или сохранением.
<p align="center">
  <img src="https://github.com/vazhka-dolya/ChameleonCK/blob/main/GitHubImg/CCK_showcase.gif"/>
</p>

# Установка и использование
1. Убедитесь, что у Вас установлена [последняя версия M64MM3](https://github.com/projectcomet64/M64MM/releases/latest).
2. Скачайте сохранение и/или ROM-версию[^1] [отсюда](https://github.com/vazhka-dolya/ChameleonCK/tree/main/SM64) (если Вы обычный пользователь, то можете проигнорировать `.config`-файл).
3. Скачайте [последнюю версию этого адд-она](https://github.com/vazhka-dolya/ChameleonCK/releases/latest). Она будет в `.zip`-архиве.
4. Распакуйте содержимое[^2] скачанного архива в коренную папку[^3] M64MM3. Если Вас запросит заменить файлы, то соглашайтесь.
5. Если Вы используете ROM-версию, то зайдите в уровень Bob-Omb Battlefield, который заменён на уровень с хромакеем. Если Вы используете сохранение, то в Project64 зайдите в **Опции** > **Настройки…** > **Опции** и убедитесь, что **Спрятать дополнительные опции** выключено. После этого запустите ROM Super Mario 64, зайдите в **Система** > **Возобновить из…** и выберите сохранение. Если выскакивает предупреждение о несоответствии ROM'а и сохранения, то просто нажмите «Да».
6. Это всё.
# Вопросы
### «Можно ли это использовать с пользовательскими моделями?»
Да! Вы можете использовать [CometCHAR](https://github.com/projectcomet64/CometCHAR), чтобы пропатчить ROM-версию используя `CMTP`-файл с моделью.
### «Почему цвета немного отличаются с включённой/выключенной опцией „**Спрятать уровень**“?»
Когда опция **Спрятать уровень** выключена, то Вы видите саму модель уровня, а когда она включена, то модель не рендерится, а вместо неё Вы видите фон. Материал модели уровня использует цвет в формате RGBA32, имеющий большую глубину, а вот фон в СМ64 использует RGBA16, что имеет глубину поменьше.
# Требования для компиляции
<details>
  <summary>Нажмите сюда, чтобы развернуть</summary>
  
- Visual Studio 2022.
- Репозиторий M64MM3 в папке под названием `M64MM`, которая находится на одну директорию выше.
  - Пример: если `.sln`-файл BodyStates — `C:/projects/ChameleonCK/ChameleonCK.sln`, то весь репозиторий M64MM3 должен быть в `C:/projects/M64MM`. Желательно, чтобы у путей не было кириллицы.
- Если Вы на Windows, то перед тем, как распаковывать архивы, нажмите правой кнопкой мыши по ним, откройте **Свойства** и посмотрите есть ли опция **Разблокировать**. Если есть, то поставьте на ней галочки и нажмите **Применить**. Если Вы этого не сделаете и архив(-ы) останутся заблокированными, то Вы можете столкнуться с проблемами.
- *В зависимости от ситуации*, Вам *возможно* нужно будет сделать следующее: зайдите в **Меню** > **Средства** > **Диспетчер пакетов NuGet** > **Консоль диспетчера пакетов** и введите `Install-Package HtmlRenderer.WinForms`. После этого, зайдите **Меню** > **Проект** > **Управление пакетами NuGet…** и убедитесь, что у `HtmlRenderer.Core` и `HtmlRenderer.WinForms` последнии версии.

</details>

# Благодарность
- GlitchyPSI ([его сайт](https://glitchypsi.xyz)) — помощь с данным адд-оном.
- LiquoricePie ([Bluesky](https://bsky.app/profile/liquoricepie.bsky.social)) – иконка адд-она.
[^1]: По юридическим причинам, чтобы получить ROM-версию, Вам необходимо изначально иметь оригинальный американский ROM Super Mario 64, который нужно пропатчить используя предоставленный BPS-файл, что можно сделать используя вот этот [сайт](https://hack64.net/tools/patcher.php).
[^2]: Это значит *всё* содержимое, включая папку `deps`. Если адд-он вылетает при попытке открыть окно **Об адд-оне**, то убедитесь, что у вас есть файлы `HtmlRenderer.dll` и `HtmlRenderer.WinForms.dll` в папке `deps` в M64MM3.
[^3]: Это та же папка, где хранится и `M64MM.exe`.
